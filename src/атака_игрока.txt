# атака_игрока
!ЭТА ЛОКАЦИЯ УПРАВЛЯЕТ АТАКОЙ ИГРОКА
atk = 0
def = текущий
это_суперудар = 0

$действия_игрока = ''


IF args = 1:
 $атака[0] = $атака_1_тип[$оружие]
 $рассчетный_тип_вреда = $тип_вреда[$оружие]
 вред_на_рассчет = базовый_вред[$оружие]
 $действия_игрока += '<<$атака_1_текст[$оружие]>>'
END

IF args = 2:
 $атака[0] = $атака_2_тип[$оружие]
 $рассчетный_тип_вреда = $тип_вреда[$оружие]
 вред_на_рассчет = базовый_вред[$оружие]
 $действия_игрока += '<<$атака_2_текст[$оружие]>>' 
END

IF args = 31:
 $атака[0] = $вторичная_атака_тип[$вторичный]
 $рассчетный_тип_вреда = $тип_вреда[$вторичный]
 вред_на_рассчет = базовый_вред[$вторичный]
 $действия_игрока += '<<$вторичная_атака_текст[$вторичный]>>'
END

IF args = 11:
 $атака[0] = 'сильная'
 $рассчетный_тип_вреда = 'дробящий'
 вред_на_рассчет = base_str
 $действия_игрока += "Вы <font color='red'>изо всех сил</font> пинаете <<$склонение_врага[текущий]>> в живот"
END
IF args = 12:
 $атака[0] = 'быстрая'
 $рассчетный_тип_вреда = 'дробящий'
 вред_на_рассчет = base_str
 $действия_игрока += "<font color='green'>Стремительный</font> толчок заставляет <<$склонение_врага[текущий]>> пошатнуться"
END
IF args = 13:
 $атака[0] = 'точная'
 $рассчетный_тип_вреда = 'дробящий'
 вред_на_рассчет = base_str
 $действия_игрока += "Вы проводите <font color='purple'>своевременную</font> подсечку"
END

IF args > 20 and args < 30:
 супер = args - 20
 $атака[0] =  $суперудар_тип[$суперудар[супер]]
 $рассчетный_тип_вреда = $тип_вреда[$суперудар[супер]]
 вред_на_рассчет = базовый_вред[$суперудар[супер]]
 $действия_игрока += $суперудар_текст[$суперудар[супер]] 
 это_суперудар = 1
END

gs 'рассчет_вреда'

IF $класс_врага[текущий] = 'пешка':
 IF модификатор > 0:
  $состояние[текущий] = 'повержен'
  дух_игрока += 10
  $действия_игрока += " [смертельный удар]"  
  else
  $действия_игрока += " [промах]"
 END
 jump 'loop9'
END

$действия_игрока += " [<<нанесенный_вред>>] "

IF $эффект = 'удвоение': 
 наложение = 0 
 $наложение = 'удвоение вреда'
END

IF это_суперудар = 1: 
 if наложение = 0: $действия_игрока += "[удвоенный]"
 $действия_игрока += "(<<$спецэффект_описание[$суперудар[супер]]>>)<br>" 
 jump 'loop10'
END

:loop9
IF $эффект = 'бонус': 
 наложение = 1 
 IF args = 1: 
  $наложение = '<<$атака_1_бонус[$оружие]>>' 
  длительность = атака_1_длительность[$оружие]
 END
 IF args = 2: 
  $наложение = '<<$атака_2_бонус[$оружие]>>' 
  длительность = атака_2_длительность[$оружие]
 END
 IF args = 11: 
  $наложение = 'внимание' 
  длительность = 2
 END
 IF args = 12: 
  $наложение = 'адреналин' 
  длительность = 2
 END
 IF args = 13: 
  $наложение = 'верткость' 
  длительность = 2
 END 
 IF args = 31: 
  $наложение = '<<$вторичная_атака_бонус[$вторичный]>>' 
  длительность = вторичная_атака_длительность[$вторичный]
 END 
END

IF $эффект = 'штраф': 
 наложение = 2 
 IF args = 1: 
  $наложение = '<<$атака_1_штраф[$оружие]>>' 
  длительность = атака_1_длительность[$оружие]
 END  
 IF args = 2: 
  $наложение = '<<$атака_2_штраф[$оружие]>>' 
  длительность = атака_2_длительность[$оружие]
 END  
 IF args = 11: 
  $наложение = 'ошеломление' 
  длительность = 2
 END  
 IF args = 12: 
  $наложение = 'рассеянность' 
  длительность = 2
 END 
 IF args = 13: 
  $наложение = 'шаткость' 
  длительность = 2
 END   
 IF args = 31: 
  $наложение = '<<$вторичная_атака_штраф[$вторичный]>>' 
  длительность = вторичная_атака_длительность[$вторичный]
 END   
END

IF $наложение = 'удвоение вреда':
 $действия_игрока += "[удвоенный]<br>"
END

IF $наложение = 'слабость' or $наложение = 'шаткость' or $наложение = 'бешенство' or $наложение = 'адреналин':
 $действия_игрока += "[<font color='red'><<$наложение>></font>]<br>"
END

IF $наложение = 'скованность' or $наложение = 'ошеломление' or $наложение = 'разгон' or $наложение = 'верткость':
 $действия_игрока += "[<font color='green'><<$наложение>></font>]<br>"
END

IF $наложение = 'боль' or $наложение = 'рассеянность' or $наложение = 'меткость' or $наложение = 'внимание':
 $действия_игрока += "[<font color='purple'><<$наложение>></font>]<br>"
END

:loop10
GT 'ход_противников'
--- атака_игрока ---------------------------------

